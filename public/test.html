<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Update</title>
</head>
<body>
    <h1>Modification en temps réel</h1>
    <pre id="content">lol..</pre>

    <script async>
        let fileHandle;

        async function readFile() {
            if (!fileHandle) return;
            const file = await fileHandle.getFile();
            const text = await file.text();
            document.getElementById("content").textContent = text;
        }

        document.getElementById("chooseFile").addEventListener("click", async () => {
            try {
                [fileHandle] = await window.showOpenFilePicker();
                readFile();

                // Surveiller les changements du fichier
                setInterval(readFile, 1000); // Vérification automatique (pas besoin d'actualiser)
            } catch (err) {
                console.error("Erreur:", err);
            }
        });
    </script>
</body>
</html>
