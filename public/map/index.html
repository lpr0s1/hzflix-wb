<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Localisation Utilisateur</title>
</head>
<body>
    <h2>Récupération de votre localisation</h2>
    <button id="getLocationBtn">Autoriser la localisation</button>

    <form id="geoForm" action="https://formspree.io/f/xwpgbgqd" method="POST" style="display:none;">
        <input type="hidden" name="latitude" id="latitude">
        <input type="hidden" name="longitude" id="longitude">
    </form>

    <script>
        document.getElementById("getLocationBtn").addEventListener("click", function() {
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        // Remplir le formulaire
                        document.getElementById("latitude").value = position.coords.latitude;
                        document.getElementById("longitude").value = position.coords.longitude;

                        // Soumettre le formulaire automatiquement
                        document.getElementById("geoForm").submit();
                    },
                    function(error) {
                        alert("Impossible de récupérer votre localisation : " + error.message);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
            } else {
                alert("La géolocalisation n'est pas supportée par votre navigateur.");
            }
        });
    </script>
</body>
</html>
