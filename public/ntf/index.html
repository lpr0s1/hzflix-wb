<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hzapp</title>

<script type="text/javascript">
(function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.src = "https://cdn.pushalert.co/integrate_62438071d6f77622c49a1fd8e4e02698.js";
    s.parentNode.insertBefore(g, s);
}(document, "script"));
</script>

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="HzApp" />
<link rel="apple-touch-icon" href="/icons/icon-192.png" />

<meta name="theme-color" content="#111827" />
<link rel="manifest" href="/ntf/manifest.webmanifest" id="manifest-link" />
<script src="https://cdn.tailwindcss.com"></script>

<script>
const ROOT_PATH = '/ntf/';
const CHANNEL_TITLE = "";
const CHANNEL_BODY  = "";

const manifest = {
    name: "HzApp",
    short_name: "HzApp",
    start_url: ROOT_PATH,
    display: "standalone",
    background_color: "#111827",
    theme_color: "#111827",
    icons: [
        { src: ROOT_PATH + "/icons/icon-192.png", sizes: "192x192", type: "image/png" },
        { src: ROOT_PATH + "/icons/icon-512.png", sizes: "512x512", type: "image/png" }
    ]
};
document.getElementById('manifest-link').setAttribute('href', URL.createObjectURL(new Blob([JSON.stringify(manifest)], {type:'application/json'})));

async function registerSW() {
    if (!('serviceWorker' in navigator)) return;
    try {
        const reg = await navigator.serviceWorker.register(ROOT_PATH + 'sw.js', {scope: ROOT_PATH});
        await navigator.serviceWorker.ready;
        console.log('Service Worker enregistré:', reg.scope);
    } catch(e) {
        console.error('Erreur SW:', e);
    }
}


async function enableNotifications() {
    try {
        const permission = await Notification.requestPermission();
        if (permission === 'granted') {
            await registerSW();
            console.log('Notifications activées');
        } else {
            console.log('Permission refusée');
        }
    } catch(e) {
        console.error('Erreur notifications:', e);
    }
}

document.addEventListener('DOMContentLoaded', () => {
    enableNotifications();
});
</script>
</head>

    <style>
        body{
            font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
        }
    </style>
<body>
    <center>
        <h2>Bienvenu</h2>
        <p style="color: #333;">Recevez les notification de live films de hanzo.</p>
        <br>
        <br>
        <h1 style="display:flex;">Veuillez patientez <span id="scd">5</span> secondes...</h1>
        <small>Et cliquez sur <b>"subscribe"</b> pour activer les notifications.</small>
    </center>

    <script>
        nm = 5;
       var sd = document.getElementById("scd");
        sd.innerHTML = nm;
        

        setInterval(function(){
            nm -= 1;
        }, 1000);
    </script>
</body>
</html>
